/**
 * Sprite class wrapper for drawing and loading of Sprites
 */

define([ '../core', '../Point' ], function(core, Point) {

	var Sprite = core.Class.extend({
		width : 32,
		height : 32,
		loadCall : null,
		init : function(src, loadCall) {
			this.img = new Image();
			this.img.src = src;
			this.loadCall = loadCall;
			this.img.onload = core.bind(this.onLoad, this);
		},
		onLoad : function(event) {
			this.width = this.img.width;
			this.height = this.img.height;
			event.target.name = this.name;
			if (this.loadCall) {
				this.loadCall(event);
			}
		},
		draw : function(srf, p) {
			srf.ctx.drawImage(this.img, p.x, p.y);
		},
		drawFrame : function(srf, sp, sw, sh, dp, dw, dh) {
			srf.ctx.drawImage(this.img, sp.x, sp.y, sw, sh, dp.x, dp.y, dw, dh);
		},
		drawRotate : function(srf, p, angle) {
			srf.ctx.save();
			srf.ctx.translate(p.x, p.y);
			srf.ctx.rotate(angle);
			srf.ctx.translate(-this.img.width / 2, -this.img.height / 2);
			srf.ctx.drawImage(this.img, 0, 0);
			srf.ctx.restore();
		}
	});

	return Sprite;
});